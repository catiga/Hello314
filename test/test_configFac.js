const TokenFactory = artifacts.require('TokenFactory');

const bytes = "0x60806040819052600c805460ff19169055620023a6388190039081908339810160408190526200002f91620003f5565b60016000558585600562000044838262000534565b50600662000053828262000534565b50604051620000629062000322565b604051809103906000f0801580156200007f573d6000803e3d6000fd5b50600780546001600160a01b0319166001600160a01b03929092169190911790553415620000e3576007546040516001600160a01b03909116903480156108fc02916000818181858888f19350505050158015620000e1573d6000803e3d6000fd5b505b506127109050620000f5828462000616565b1115620001495760405162461bcd60e51b815260206004820152601960248201527f7061727469616c20706172616d7320697320696e76616c69640000000000000060448201526064015b60405180910390fd5b600980546001600160a01b0319166001600160a01b038916179055600d83905580156200018f576127106200017f828662000632565b6200018b91906200064c565b600b555b60008215620001b657612710620001a7848762000632565b620001b391906200064c565b90505b600081600b54620001c8919062000616565b1115620001f757600954600b54620001f7916001600160a01b031690620001f190849062000616565b62000258565b600081600b54876200020a91906200066f565b6200021691906200066f565b11156200023f576200023f3082600b54886200023391906200066f565b620001f191906200066f565b5050600e805460ff191690555062000685945050505050565b6001600160a01b038216620002b05760405162461bcd60e51b815260206004820152601f60248201527f45524332303a206d696e7420746f20746865207a65726f206164647265737300604482015260640162000140565b8060046000828254620002c4919062000616565b90915550506001600160a01b0382166000818152600260209081526040808320805486019055518481527fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef910160405180910390a35050565b505050565b610233806200217383390190565b634e487b7160e01b600052604160045260246000fd5b600082601f8301126200035857600080fd5b81516001600160401b038082111562000375576200037562000330565b604051601f8301601f19908116603f01168101908282118183101715620003a057620003a062000330565b81604052838152602092508683858801011115620003bd57600080fd5b600091505b83821015620003e15785820183015181830184015290820190620003c2565b600093810190920192909252949350505050565b600080600080600080600060e0888a0312156200041157600080fd5b87516001600160a01b03811681146200042957600080fd5b60208901519097506001600160401b03808211156200044757600080fd5b620004558b838c0162000346565b975060408a01519150808211156200046c57600080fd5b506200047b8a828b0162000346565b955050606088015193506080880151925060a0880151915060c0880151905092959891949750929550565b600181811c90821680620004bb57607f821691505b602082108103620004dc57634e487b7160e01b600052602260045260246000fd5b50919050565b601f8211156200031d57600081815260208120601f850160051c810160208610156200050b5750805b601f850160051c820191505b818110156200052c5782815560010162000517565b505050505050565b81516001600160401b0381111562000550576200055062000330565b6200056881620005618454620004a6565b84620004e2565b602080601f831160018114620005a05760008415620005875750858301515b600019600386901b1c1916600185901b1785556200052c565b600085815260208120601f198616915b82811015620005d157888601518255948401946001909101908401620005b0565b5085821015620005f05787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b634e487b7160e01b600052601160045260246000fd5b808201808211156200062c576200062c62000600565b92915050565b80820281158282048414176200062c576200062c62000600565b6000826200066a57634e487b7160e01b600052601260045260246000fd5b500490565b818103818111156200062c576200062c62000600565b611ade80620006956000396000f3fe6080604052600436106101c65760003560e01c806365029d82116100f7578063a9059cbb11610095578063dd62ed3e11610064578063dd62ed3e146104f5578063e773f0391461053b578063faa743e31461055b578063fea9dbbf1461057b57600080fd5b8063a9059cbb1461049e578063aa6764dc146104be578063b822ccaa146104c6578063d9443923146104db57600080fd5b806383f12fec116100d157806383f12fec146104365780638da5cb5b1461045657806395d89b41146104765780639a540abf1461048b57600080fd5b806365029d82146103c657806370a08231146103e65780637ec18cf61461041c57600080fd5b80631693e8d411610164578063313ce5671161013e578063313ce567146103435780633b97e8561461036557806351c6590a1461037b5780635b8bec551461038e57600080fd5b80631693e8d4146102ef57806318160ddd1461030e57806323b872dd1461032357600080fd5b80630902f1ac116101a05780630902f1ac14610255578063095ea7b31461028e57806311106ee2146102ae57806312a54b62146102ce57600080fd5b806301ffc9a7146101da57806304c0c4761461020f57806306fdde031461023357600080fd5b366101d5576101d361059a565b005b600080fd5b3480156101e657600080fd5b506101fa6101f536600461169e565b61061f565b60405190151581526020015b60405180910390f35b34801561021b57600080fd5b5061022560015481565b604051908152602001610206565b34801561023f57600080fd5b50610248610656565b60405161020691906116cf565b34801561026157600080fd5b50610279306000908152600260205260409020544791565b60408051928352602083019190915201610206565b34801561029a57600080fd5b506101fa6102a9366004611739565b6106e8565b3480156102ba57600080fd5b506102256102c9366004611763565b610700565b3480156102da57600080fd5b50600a546101fa90600160a01b900460ff1681565b3480156102fb57600080fd5b50600e546101fa90610100900460ff1681565b34801561031a57600080fd5b50600454610225565b34801561032f57600080fd5b506101fa61033e366004611798565b610761565b34801561034f57600080fd5b50600d5460405160ff9091168152602001610206565b34801561037157600080fd5b50610225600d5481565b6101d36103893660046117d4565b610785565b34801561039a57600080fd5b50600a546103ae906001600160a01b031681565b6040516001600160a01b039091168152602001610206565b3480156103d257600080fd5b506101d36103e13660046118a5565b610894565b3480156103f257600080fd5b506102256104013660046118e2565b6001600160a01b031660009081526002602052604090205490565b34801561042857600080fd5b50600c546101fa9060ff1681565b34801561044257600080fd5b506101d36104513660046118fd565b61096f565b34801561046257600080fd5b506009546103ae906001600160a01b031681565b34801561048257600080fd5b50610248610a73565b6101d3610499366004611942565b610a82565b3480156104aa57600080fd5b506101fa6104b9366004611739565b610c24565b6101d3610c58565b3480156104d257600080fd5b506101d3610d19565b3480156104e757600080fd5b50600e546101fa9060ff1681565b34801561050157600080fd5b50610225610510366004611968565b6001600160a01b03918216600090815260036020908152604080832093909416825291909152205490565b34801561054757600080fd5b506101d3610556366004611942565b610d4d565b34801561056757600080fd5b506101d36105763660046117d4565b610d86565b34801561058757600080fd5b506007546001600160a01b031631610225565b3060009081526002602052604081205447906105b690346119b1565b6105c091906119c8565b90506105cd303383610f1b565b60408051348152600060208201819052918101919091526060810182905233907f49926bbebe8474393f434dfa4f78694c0923efa07d19f2284518bfabd06eb737906080015b60405180910390a25b50565b60006001600160e01b031982166301ffc9a760e01b148061065057506001600160e01b03198216635b3db1e760e11b145b92915050565b606060058054610665906119ea565b80601f0160208091040260200160405190810160405280929190818152602001828054610691906119ea565b80156106de5780601f106106b3576101008083540402835291602001916106de565b820191906000526020600020905b8154815290600101906020018083116106c157829003601f168201915b5050505050905090565b6000336106f68185856110d7565b5060019392505050565b600080600061071c306000908152600260205260409020544791565b91509150831561074d576107308583611a24565b61073a82876119b1565b61074491906119c8565b92505050610650565b6107578582611a24565b61073a83876119b1565b60003361076f8582856111f3565b61077a858585610f1b565b506001949350505050565b600154156107d45760405162461bcd60e51b8152602060048201526017602482015276131a5c5d5a591a5d1e48185b1c9958591e481859191959604a1b60448201526064015b60405180910390fd5b600034116108125760405162461bcd60e51b815260206004820152600b60248201526a139bc8115512081cd95b9d60aa1b60448201526064016107cb565b8043106108585760405162461bcd60e51b8152602060048201526014602482015273426c6f636b206e756d62657220746f6f206c6f7760601b60448201526064016107cb565b60018190556040805182815234602082015233917f06239653922ac7bea6aa2b19dc486b9361821d37712eb796adfd38d81de278ca9101610613565b6009546001600160a01b031633146108ee5760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e657260448201526064016107cb565b600c5460ff16156109415760405162461bcd60e51b815260206004820152601760248201527f50726573616c6520616c726561647920656e61626c656400000000000000000060448201526064016107cb565b60008151600b5461095291906119c8565b905061095e828261096f565b5050600c805460ff19166001179055565b600082511180156109805750600081115b6109c35760405162461bcd60e51b8152602060048201526014602482015273696e76616c696420626174636820706172616d7360601b60448201526064016107cb565b60008183516109d291906119b1565b33600090815260026020526040902054909150811115610a2b5760405162461bcd60e51b8152602060048201526014602482015273696e73756666696369656e742062616c616e636560601b60448201526064016107cb565b60005b8351811015610a6d57610a5b33858381518110610a4d57610a4d611a37565b602002602001015185610f1b565b80610a6581611a4d565b915050610a2e565b50505050565b606060068054610665906119ea565b6009546001600160a01b03163314610adc5760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e657260448201526064016107cb565b600e5460ff1615610b295760405162461bcd60e51b8152602060048201526017602482015276131a5c5d5a591a5d1e48185b1c9958591e481859191959604a1b60448201526064016107cb565b600e805460ff1916600117905534610b715760405162461bcd60e51b815260206004820152600b60248201526a139bc8115512081cd95b9d60aa1b60448201526064016107cb565b8063ffffffff164310610bbd5760405162461bcd60e51b8152602060048201526014602482015273426c6f636b206e756d62657220746f6f206c6f7760601b60448201526064016107cb565b63ffffffff81166001819055600e805461ff001916610100179055600a80546001600160a01b031916339081179091556040805192835234602084015290917f06239653922ac7bea6aa2b19dc486b9361821d37712eb796adfd38d81de278ca9101610613565b6000306001600160a01b03841603610c4457610c3f8261127f565b610c4f565b610c4f338484610f1b565b50600192915050565b60003411610ca85760405162461bcd60e51b815260206004820152601960248201527f656e68616e63652076616c75652073686f756c6420677420300000000000000060448201526064016107cb565b6007546040516001600160a01b03909116903480156108fc02916000818181858888f19350505050158015610ce1573d6000803e3d6000fd5b5060405134815233907f8afa789178083b5e769bf1688be9b3cb5bb4051efbce39835efdc8b3e84dfc9c9060200160405180910390a2565b600a546001600160a01b03163314610d435760405162461bcd60e51b81526004016107cb90611a66565b610d4b6113cd565b565b600a546001600160a01b03163314610d775760405162461bcd60e51b81526004016107cb90611a66565b61061c8163ffffffff166114ea565b33600090815260026020526040902054811115610ddc5760405162461bcd60e51b8152602060048201526014602482015273696e73756666696369656e742062616c616e636560601b60448201526064016107cb565b60008111610e2c5760405162461bcd60e51b815260206004820152601d60248201527f72657472696576652076616c75652073686f756c64206265206774203000000060448201526064016107cb565b600060045411610e7e5760405162461bcd60e51b815260206004820152601b60248201527f546f74616c20737570706c792063616e6e6f74206265207a65726f000000000060448201526064016107cb565b60045460075460009190610e9d9084906001600160a01b0316316119b1565b610ea791906119c8565b9050610eb33383611540565b60075460405163a35423e360e01b8152336004820152602481018390526001600160a01b039091169063a35423e390604401600060405180830381600087803b158015610eff57600080fd5b505af1158015610f13573d6000803e3d6000fd5b505050505050565b336000908152600860205260409020544363ffffffff90911603610f9b5760405162461bcd60e51b815260206004820152603160248201527f596f752063616e2774206d616b652074776f207472616e73616374696f6e7320604482015270696e207468652073616d6520626c6f636b60781b60648201526084016107cb565b336000908152600860209081526040808320805463ffffffff19164363ffffffff161790556001600160a01b038616835260029091529020548111156110325760405162461bcd60e51b815260206004820152602660248201527f45524332303a207472616e7366657220616d6f756e7420657863656564732062604482015265616c616e636560d01b60648201526084016107cb565b6001600160a01b03808416600090815260026020526040902080548390039055821661106657600480548290039055611085565b6001600160a01b03821660009081526002602052604090208054820190555b816001600160a01b0316836001600160a01b03167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef836040516110ca91815260200190565b60405180910390a3505050565b6001600160a01b0383166111395760405162461bcd60e51b8152602060048201526024808201527f45524332303a20617070726f76652066726f6d20746865207a65726f206164646044820152637265737360e01b60648201526084016107cb565b6001600160a01b03821661119a5760405162461bcd60e51b815260206004820152602260248201527f45524332303a20617070726f766520746f20746865207a65726f206164647265604482015261737360f01b60648201526084016107cb565b6001600160a01b0383811660008181526003602090815260408083209487168084529482529182902085905590518481527f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92591016110ca565b6001600160a01b038381166000908152600360209081526040808320938616835292905220546000198114610a6d57818110156112725760405162461bcd60e51b815260206004820152601d60248201527f45524332303a20696e73756666696369656e7420616c6c6f77616e636500000060448201526064016107cb565b610a6d84848484036110d7565b3060009081526002602052604081205461129a908390611a24565b6112a447846119b1565b6112ae91906119c8565b9050600081116112f65760405162461bcd60e51b815260206004820152601360248201527253656c6c20616d6f756e7420746f6f206c6f7760681b60448201526064016107cb565b804710156113465760405162461bcd60e51b815260206004820152601c60248201527f496e73756666696369656e742045544820696e2072657365727665730000000060448201526064016107cb565b611351333084610f1b565b604051339082156108fc029083906000818181858888f1935050505015801561137e573d6000803e3d6000fd5b50604080516000808252602082018590528183018490526060820152905133917f49926bbebe8474393f434dfa4f78694c0923efa07d19f2284518bfabd06eb737919081900360800190a25050565b6113d5611674565b60015443116114195760405162461bcd60e51b815260206004820152601060248201526f131a5c5d5a591a5d1e481b1bd8dad95960821b60448201526064016107cb565b6040514790600090339083908381818185875af1925050503d806000811461145d576040519150601f19603f3d011682016040523d82523d6000602084013e611462565b606091505b50509050806114a95760405162461bcd60e51b8152602060048201526013602482015272115512081d1c985b9cd9995c8819985a5b1959606a1b60448201526064016107cb565b60405182815233907fdfdd120ded9b7afc0c23dd5310e93aaa3e1c3b9f75af9b805fab3030842439f29060200160405180910390a25050610d4b6001600055565b806001541061153b5760405162461bcd60e51b815260206004820152601a60248201527f596f752063616e27742073686f7274656e206475726174696f6e00000000000060448201526064016107cb565b600155565b6001600160a01b0382166115a05760405162461bcd60e51b815260206004820152602160248201527f45524332303a206275726e2066726f6d20746865207a65726f206164647265736044820152607360f81b60648201526084016107cb565b6001600160a01b038216600090815260026020526040902054818110156116145760405162461bcd60e51b815260206004820152602260248201527f45524332303a206275726e20616d6f756e7420657863656564732062616c616e604482015261636560f01b60648201526084016107cb565b6001600160a01b03831660008181526002602090815260408083208686039055600480548790039055518581529192917fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef910160405180910390a3505050565b60026000540361169757604051633ee5aeb560e01b815260040160405180910390fd5b6002600055565b6000602082840312156116b057600080fd5b81356001600160e01b0319811681146116c857600080fd5b9392505050565b600060208083528351808285015260005b818110156116fc578581018301518582016040015282016116e0565b506000604082860101526040601f19601f8301168501019250505092915050565b80356001600160a01b038116811461173457600080fd5b919050565b6000806040838503121561174c57600080fd5b6117558361171d565b946020939093013593505050565b6000806040838503121561177657600080fd5b823591506020830135801515811461178d57600080fd5b809150509250929050565b6000806000606084860312156117ad57600080fd5b6117b68461171d565b92506117c46020850161171d565b9150604084013590509250925092565b6000602082840312156117e657600080fd5b5035919050565b634e487b7160e01b600052604160045260246000fd5b600082601f83011261181457600080fd5b8135602067ffffffffffffffff80831115611831576118316117ed565b8260051b604051601f19603f83011681018181108482111715611856576118566117ed565b60405293845285810183019383810192508785111561187457600080fd5b83870191505b8482101561189a5761188b8261171d565b8352918301919083019061187a565b979650505050505050565b6000602082840312156118b757600080fd5b813567ffffffffffffffff8111156118ce57600080fd5b6118da84828501611803565b949350505050565b6000602082840312156118f457600080fd5b6116c88261171d565b6000806040838503121561191057600080fd5b823567ffffffffffffffff81111561192757600080fd5b61193385828601611803565b95602094909401359450505050565b60006020828403121561195457600080fd5b813563ffffffff811681146116c857600080fd5b6000806040838503121561197b57600080fd5b6119848361171d565b91506119926020840161171d565b90509250929050565b634e487b7160e01b600052601160045260246000fd5b80820281158282048414176106505761065061199b565b6000826119e557634e487b7160e01b600052601260045260246000fd5b500490565b600181811c908216806119fe57607f821691505b602082108103611a1e57634e487b7160e01b600052602260045260246000fd5b50919050565b808201808211156106505761065061199b565b634e487b7160e01b600052603260045260246000fd5b600060018201611a5f57611a5f61199b565b5060010190565b60208082526022908201527f596f7520617265206e6f7420746865206c69717569646974792070726f76696460408201526132b960f11b60608201526080019056fea26469706673582212201ed5ba8cc816e8c531e5d030b7525b1db3e22f0eaca99c7418d9d09c383d0c1c64736f6c634300081400336080604052600080546001600160a01b0319163317905561020e806100256000396000f3fe6080604052600436106100225760003560e01c8063a35423e31461002e57600080fd5b3661002957005b600080fd5b34801561003a57600080fd5b5061004e6100493660046101a0565b610050565b005b6000546001600160a01b031633146100af5760405162461bcd60e51b815260206004820152601760248201527f4f6e6c79206b65657065722063616e206578656375746500000000000000000060448201526064015b60405180910390fd5b804710156100f65760405162461bcd60e51b8152602060048201526014602482015273696e73756666696369656e742062616c616e636560601b60448201526064016100a6565b6101008282610104565b5050565b804710156101275760405163cd78605960e01b81523060048201526024016100a6565b6000826001600160a01b03168260405160006040518083038185875af1925050503d8060008114610174576040519150601f19603f3d011682016040523d82523d6000602084013e610179565b606091505b505090508061019b57604051630a12f52160e11b815260040160405180910390fd5b505050565b600080604083850312156101b357600080fd5b82356001600160a01b03811681146101ca57600080fd5b94602093909301359350505056fea26469706673582212205c24ad34ef5e651da95dd361aaedeffc6bd6766d86ad404e5f1179e3b017998164736f6c63430008140033";

contract('Config TokenFactory', (accounts) => {
    describe("config", function() {

        it(`should return Name:`, async () => {
            let factoryInstance = await TokenFactory.at('0x761bCC93233E5DFaFD469C3ee2724381d653d12a')
            
            const codeHash = web3.utils.keccak256(bytes)
            console.log('codeHash ', codeHash);

            console.log('setting new code hash...')
            const setresult = await factoryInstance.configCode(codeHash, true)
            console.log('set result:', setresult)

            
            const existTpls = await factoryInstance.getTpls()
            console.log(existTpls)

            const readResult = await factoryInstance.securityCodes(codeHash)
            console.log(readResult)

            // const constructorArgs = web3.eth.abi.encodeParameters(
            //     ['address', 'string', 'string', 'uint256', 'uint256', 'uint256', 'uint256'],
            //     ['0xFaD652ad544a85c87F00285EB64acDa7d79E20B6', 'First Token 2510', 'FTN', web3.utils.toWei('99999', 'ether'), 9, 1000, 4500]
            //   );

            // const deployResult = await factoryInstance.deployContract(bytes, constructorArgs)
            // console.log('deployResult', deployResult)

            // 0xd459f38453570b16c156ca82f8814e8bcfc3a8e882646d8a7f744a683549e0c4



            // const owner = await novaProxyInstance.owner();
            // const impl = await novaProxyInstance.getImplementation()
            // const novaLogicInstanceAtProxyAddress = new web3.eth.Contract(NovaRouter.abi, novaProxyInstance.address);

            // await novaLogicInstanceAtProxyAddress.methods.initialize().send({ from: accounts[0], gasPrice:8000000000, gas:5000000 });
            // const selltax = await novaLogicInstanceAtProxyAddress.methods.sellTax().call()
            // console.log('owner', owner)
            // console.log('impl', impl)
            // console.log('sell tax', selltax)
            // console.log('accounts', accounts)

            // const result = await novaLogicInstanceAtProxyAddress.methods.adjustTax(20, 20).send({ from: accounts[0], gasPrice:8000000000, gas:5000000 });
            // console.log('adjust tax result', result)
            
            // const result = await novaLogicInstanceAtProxyAddress.methods.reinitialize(500000).send({ from: accounts[0], gasPrice:8000000000, gas:5000000 });
            // console.log('adjust reinitialize result', result)
            // novaLogicInstanceAtProxyAddress.methods.
        });
    })
  
});
